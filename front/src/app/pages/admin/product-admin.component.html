<div class="admin-container">
  <h2>Administrar Productos</h2>
  <button (click)="openModal()" class="create-btn">+ Crear producto</button>

  <table class="product-table">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Descripción</th>
        <th>Precio</th>
        <th>Stock</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of paginatedProducts">
        <td>{{ p.nombre }}</td>
        <td>{{ p.descripcion }}</td>
        <td>{{ p.precio | currency:'COP' }}</td>
        <td>{{ p.stock }}</td>
        <td>
          <button (click)="openModal(p)" class="edit-btn">Editar</button>
          <button (click)="confirmDelete(p.id)" class="delete-btn">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="pagination-controls">
  <button (click)="changePage(-1)" [disabled]="currentPage === 1">Anterior</button>
  <span>Página {{ currentPage }} de {{ totalPages }}</span>
  <button (click)="changePage(1)" [disabled]="currentPage === totalPages">Siguiente</button>
</div>

<!-- Modal -->
<div class="modal" *ngIf="modalVisible">
  <div class="modal-content">
    <h3>{{ editingId ? 'Editar Producto' : 'Crear Producto' }}</h3>
    <form [formGroup]="form" (ngSubmit)="save()">
      <input formControlName="nombre" placeholder="Nombre">
      <input formControlName="descripcion" placeholder="Descripción">
      <input type="number" formControlName="precio" placeholder="Precio">
      <input type="number" formControlName="stock" placeholder="Stock">
      <div class="modal-actions">
        <button type="submit">{{ editingId ? 'Actualizar' : 'Guardar' }}</button>
        <button type="button" (click)="closeModal()">Cancelar</button>
      </div>
    </form>
  </div>
</div>
